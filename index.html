<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>عالم حبنا - رسائل عبدو لمنة 💌</title>
  <meta name="description" content="رسائل حب وعشق من عبدو لحبيبته منة">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --primary-color: #e91e63;
      --primary-dark: #c2185b;
      --secondary-color: #ff4081;
      --accent-color: #ff80ab;
      --accent-light: #ffb2d0;
      --text-color: #fff;
      --bg-gradient-day: linear-gradient(135deg, #FF358A 0%, #FF734A 100%);
      --bg-gradient-night: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      --container-bg-day: rgba(255, 255, 255, 0.15);
      --container-bg-night: rgba(0, 0, 0, 0.4);
      --shadow-day: 0 8px 32px rgba(233, 30, 99, 0.3);
      --shadow-night: 0 8px 32px rgba(102, 51, 153, 0.5);
      --transition: all 0.3s ease;
      --transition-slow: all 0.6s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Tajawal', sans-serif;
      background: var(--bg-gradient-day);
      color: var(--text-color);
      min-height: 100vh;
      overflow-x: hidden;
      transition: var(--transition);
      position: relative;
      line-height: 1.6;
    }

    body.night-mode {
      background: var(--bg-gradient-night);
    }

    /* تصميم الحاوية الرئيسية */
    .container {
      width: 90%;
      max-width: 800px;
      margin: 2rem auto;
      padding: 2rem;
      background: var(--container-bg-day);
      backdrop-filter: blur(8px);
      border-radius: 25px;
      box-shadow: var(--shadow-day);
      position: relative;
      z-index: 10;
      transition: var(--transition);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .night-mode .container {
      background: var(--container-bg-night);
      box-shadow: var(--shadow-night);
      border-color: rgba(0, 0, 0, 0.1);
    }

    h1 {
      font-size: clamp(1.8rem, 4vw, 2.5rem);
      margin-bottom: 1.5rem;
      color: var(--text-color);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      font-weight: 700;
      text-align: center;
    }

    .message-container {
      min-height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      position: relative;
    }

    #loveMessage {
      font-size: clamp(1.2rem, 3vw, 1.5rem);
      line-height: 1.8;
      margin: 1.5rem 0;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
      font-weight: 500;
      text-align: center;
      transition: var(--transition);
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.8s ease forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .footer {
      font-size: clamp(1rem, 2vw, 1.2rem);
      margin-top: 1.5rem;
      opacity: 0.9;
      text-align: center;
    }

    .love-timer {
      background: rgba(255, 255, 255, 0.2);
      padding: 0.8rem;
      border-radius: 15px;
      margin-top: 1.5rem;
      font-size: clamp(0.9rem, 2vw, 1.1rem);
      text-align: center;
      backdrop-filter: blur(5px);
    }

    /* تحسين تصميم أزرار التنقل */
    .navigation {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
      gap: 1rem;
      flex-wrap: wrap;
      position: relative;
    }

    .nav-btn {
      padding: 0.7rem 1.5rem;
      border: none;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      font-family: 'Tajawal', sans-serif;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .nav-btn.active {
      background: var(--primary-color);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
      transform: translateY(-2px);
    }

    /* زر الوضع الليلي في شريط التنقل */
    .mode-toggle-container {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
    }

    .toggle-night {
      background: rgba(255, 255, 255, 0.3);
      border: none;
      color: white;
      padding: 0.6rem 1rem;
      border-radius: 50px;
      cursor: pointer;
      font-family: 'Tajawal', sans-serif;
      font-size: 0.9rem;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      backdrop-filter: blur(5px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .toggle-night:hover {
      background: rgba(255, 255, 255, 0.5);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
    }

    .night-mode .toggle-night {
      background: rgba(0, 0, 0, 0.3);
    }

    .night-mode .toggle-night:hover {
      background: rgba(0, 0, 0, 0.5);
    }

    /* عناصر الطفو */
    .floating-elements {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }

    .floating-element {
      position: absolute;
      animation: float linear infinite;
      opacity: 0.8;
      user-select: none;
      will-change: transform;
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }

    /* انترو البداية */
    .intro-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--primary-color);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: all 0.8s ease;
      opacity: 1;
    }

    .intro-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .intro-text {
      font-size: clamp(2rem, 6vw, 3.5rem);
      font-weight: 700;
      margin-bottom: 2rem;
      text-align: center;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      transform: scale(0.9);
      animation: pulse 2s infinite alternate;
    }

    @keyframes pulse {
      0% {
        transform: scale(0.9);
      }
      100% {
        transform: scale(1.1);
      }
    }

    .loading-bar {
      width: 80%;
      max-width: 300px;
      height: 8px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      overflow: hidden;
    }

    .loading-progress {
      height: 100%;
      width: 0%;
      background: white;
      border-radius: 10px;
      transition: width 0.3s ease;
    }

    /* تأثيرات اللمس */
    .touch-effect {
      position: absolute;
      font-size: 1.8rem;
      font-weight: bold;
      pointer-events: none;
      z-index: 100;
      animation: fadeUp 1.5s ease-out forwards;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      will-change: transform, opacity;
    }

    @keyframes fadeUp {
      0% {
        opacity: 1;
        transform: translateY(0);
      }
      100% {
        opacity: 0;
        transform: translateY(-100px);
      }
    }

    /* تأثيرات القلب */
    .heart-explosion {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 999;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      will-change: transform, opacity;
    }

    .heart-explosion.active {
      animation: heartExplosion 1.2s ease-out forwards;
    }

    @keyframes heartExplosion {
      0% {
        transform: scale(0.3);
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: scale(1.5);
        opacity: 0;
      }
    }

    .big-heart {
      font-size: 10rem;
      color: var(--primary-color);
      filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.8));
    }

    /* تأثيرات البرق */
    .lightning {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at center, rgba(255,255,255,0.8)0%, transparent 80%);
      opacity: 0;
      pointer-events: none;
      animation: flash 5s infinite;
      z-index: 10000;
    }

    @keyframes flash {
      0%, 100% { opacity: 0; }
      10% { opacity: 0.4; }
      11% { opacity: 0; }
      20% { opacity: 0.3; }
      21% { opacity: 0; }
    }

    /* النجوم */
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 2;
    }

    .star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      border-radius: 50%;
      animation: twinkle 5s infinite;
      will-change: opacity;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 1; }
    }

    /* الخط الزمني */
    .timeline {
      margin-top: 2rem;
      padding: 1rem;
      border-left: 3px solid var(--accent-color);
    }

    .timeline-event {
      margin-bottom: 1rem;
      padding-left: 1rem;
      position: relative;
      transition: var(--transition);
      opacity: 0;
      transform: translateX(20px);
    }

    .timeline-event.animated {
      opacity: 1;
      transform: translateX(0);
    }

    .timeline-event::before {
      content: "💘";
      position: absolute;
      left: -1.2rem;
      top: 0;
    }

    .timeline-event h4 {
      margin: 0;
      font-size: 1.1rem;
    }

    .timeline-event p {
      margin: 0.2rem 0;
      font-size: 0.95rem;
      opacity: 0.9;
    }

    /* الشهاب */
    .shooting-star {
      position: fixed;
      width: 3px;
      height: 100px;
      background: linear-gradient(to bottom, rgba(255,255,255,0.8), transparent);
      animation: shoot 2s linear;
      z-index: 9999;
      will-change: transform, opacity;
    }

    @keyframes shoot {
      0% { top: -100px; left: 100vw; opacity: 1; }
      100% { top: 100vh; left: -100px; opacity: 0; }
    }

    /* تحسين تصميم الأزرار بشكل فقاعات */
    .btn {
      padding: 0.8rem 1.8rem;
      border: none;
      border-radius: 50px;
      background: var(--primary-color);
      color: white;
      font-size: 1rem;
      cursor: pointer;
      transition: var(--transition);
      font-family: 'Tajawal', sans-serif;
      display: inline-block;
      text-align: center;
      margin: 0.5rem;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
      position: relative;
      overflow: hidden;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    }

    .btn:active {
      transform: translateY(1px);
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-container {
      text-align: center;
      margin-top: 1rem;
    }

    /* قسم الرسائل */
    .messages-section {
      margin-top: 2rem;
      padding: 1.5rem;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      backdrop-filter: blur(5px);
    }

    .messages-section h2 {
      text-align: center;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }

    .message-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .message-input {
      padding: 1rem;
      border-radius: 15px;
      border: none;
      background: rgba(255, 255, 255, 0.9);
      font-family: 'Tajawal', sans-serif;
      font-size: 1rem;
      resize: none;
      min-height: 100px;
      transition: var(--transition);
    }

    .message-input:focus {
      outline: none;
      box-shadow: 0 0 0 2px var(--primary-color);
    }

    .sender-selector {
      display: flex;
      gap: 1rem;
      justify-content: center;
    }

    .sender-btn {
      flex: 1;
      padding: 0.8rem;
      border: none;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      font-family: 'Tajawal', sans-serif;
      font-size: 1rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .sender-btn.active {
      background: var(--primary-color);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .messages-list {
      margin-top: 2rem;
      max-height: 400px;
      overflow-y: auto;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 15px;
    }

    .message-item {
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 15px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(5px);
      animation: fadeIn 0.5s ease;
      transition: var(--transition);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .message-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
      opacity: 0.8;
    }

    .message-sender {
      font-weight: bold;
    }

    .message-time {
      font-size: 0.8rem;
    }

    .message-content {
      font-size: 1rem;
      line-height: 1.5;
    }

    .message-from-abdo {
      border-right: 3px solid var(--primary-color);
    }

    .message-from-menna {
      border-right: 3px solid #4CAF50;
    }

    /* تحسين التنقل بين الصفحات */
    .page {
      display: none;
    }

    .page.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    /* معرض الصور */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .gallery-item {
      height: 150px;
      border-radius: 15px;
      overflow: hidden;
      position: relative;
      cursor: pointer;
      transition: var(--transition);
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
    }

    .gallery-item:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    }

    /* تأثيرات جديدة */
    .love-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 3;
    }

    .particle {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--accent-color);
      animation: particleFloat 10s linear infinite;
      opacity: 0;
    }

    @keyframes particleFloat {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }

    .typing-animation {
      display: inline-block;
      overflow: hidden;
      white-space: nowrap;
      border-right: 2px solid var(--primary-color);
      animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
    }

    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }

    @keyframes blink-caret {
      from, to { border-color: transparent }
      50% { border-color: var(--primary-color) }
    }

    .pulse-glow {
      animation: pulseGlow 2s infinite alternate;
    }

    @keyframes pulseGlow {
      0% {
        box-shadow: 0 0 5px rgba(233, 30, 99, 0.5);
      }
      100% {
        box-shadow: 0 0 20px rgba(233, 30, 99, 0.8);
      }
    }

    /* عداد عيد الميلاد */
    .birthday-countdown {
      background: rgba(255, 255, 255, 0.15);
      padding: 1.5rem;
      border-radius: 20px;
      margin-top: 2rem;
      text-align: center;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .birthday-countdown h3 {
      margin-bottom: 1rem;
      color: var(--accent-light);
    }

    .countdown-timer {
      font-size: 1.5rem;
      font-weight: bold;
      margin: 1rem 0;
      color: var(--accent-light);
    }

    .birthday-message {
      margin-top: 1rem;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      animation: pulseGlow 2s infinite;
    }

    /* رفع الوسائط */
    .media-upload {
      margin-top: 2rem;
      padding: 1.5rem;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      backdrop-filter: blur(5px);
    }

    .media-upload h3 {
      text-align: center;
      margin-bottom: 1rem;
    }

    .upload-area {
      border: 2px dashed rgba(255, 255, 255, 0.3);
      border-radius: 15px;
      padding: 2rem;
      text-align: center;
      margin-bottom: 1rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .upload-area:hover {
      border-color: var(--primary-color);
      background: rgba(255, 255, 255, 0.05);
    }

    .upload-area.dragover {
      border-color: var(--primary-color);
      background: rgba(255, 255, 255, 0.1);
    }

    .upload-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .file-input {
      display: none;
    }

    .uploaded-media {
      margin-top: 2rem;
    }

    .media-item {
      position: relative;
      margin-bottom: 1rem;
      border-radius: 15px;
      overflow: hidden;
      background: rgba(0, 0, 0, 0.2);
    }

    .media-item img, .media-item video, .media-item audio {
      width: 100%;
      display: block;
    }

    .media-item audio {
      width: 100%;
      padding: 1rem;
    }

    .delete-media {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* تحسينات شاملة للهواتف والأجهزة اللوحية */
    @media (max-width: 768px) {
      .container {
        padding: 1.5rem;
        width: 95%;
        margin: 1rem auto;
        border-radius: 20px;
      }

      #loveMessage {
        margin: 1rem 0;
      }

      .toggle-night {
        padding: 0.6rem 1rem;
        font-size: 0.9rem;
      }

      .btn {
        padding: 0.7rem 1.5rem;
        font-size: 0.9rem;
        margin: 0.3rem;
      }

      .sender-selector {
        flex-direction: column;
      }

      .gallery {
        grid-template-columns: repeat(2, 1fr);
      }

      .nav-btn {
        padding: 0.6rem 1.2rem;
        font-size: 0.9rem;
      }

      .message-input {
        min-height: 80px;
      }

      .mode-toggle-container {
        position: static;
        transform: none;
        margin-bottom: 1rem;
        width: 100%;
        text-align: center;
      }

      .toggle-night {
        margin: 0 auto;
      }
    }

    /* تحسينات إضافية للأجهزة الصغيرة جداً */
    @media (max-width: 480px) {
      .container {
        padding: 1rem;
        width: 98%;
        margin: 0.5rem auto;
      }

      .navigation {
        gap: 0.5rem;
      }

      .nav-btn {
        padding: 0.5rem 1rem;
        font-size: 0.8rem;
      }

      .btn {
        padding: 0.6rem 1.2rem;
        font-size: 0.85rem;
        margin: 0.2rem;
      }

      .gallery {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
      }

      .gallery-item {
        height: 120px;
        font-size: 2.5rem;
      }

      .messages-section {
        padding: 1rem;
      }

      .upload-area {
        padding: 1rem;
      }
    }

    /* تحسينات خاصة بالهواتف في الوضع الطولي */
    @media (max-width: 768px) and (orientation: portrait) {
      .toggle-night {
        padding: 0.8rem;
        width: auto;
        height: auto;
        justify-content: center;
      }

      .container {
        padding: 1rem;
        margin: 0.5rem auto;
      }

      .navigation {
        gap: 0.3rem;
      }

      .nav-btn {
        padding: 0.5rem 0.8rem;
        font-size: 0.75rem;
      }

      .btn {
        padding: 0.6rem 1rem;
        font-size: 0.8rem;
      }

      .message-input {
        min-height: 70px;
      }

      .gallery {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
      }

      .gallery-item {
        height: 100px;
        font-size: 2rem;
      }

      h1 {
        font-size: 1.5rem;
      }

      .footer {
        font-size: 0.9rem;
      }

      .love-timer {
        font-size: 0.8rem;
        padding: 0.6rem;
      }

      .message-container {
        min-height: 150px;
      }
    }

    /* تحسينات إضافية للهواتف الطولية ذات الشاشات الصغيرة جداً */
    @media (max-width: 360px) and (orientation: portrait) {
      .container {
        padding: 0.8rem;
        margin: 0.3rem auto;
      }

      .navigation {
        flex-direction: column;
        align-items: center;
      }

      .nav-btn {
        width: 90%;
        margin-bottom: 0.3rem;
      }

      .btn-container {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .btn {
        width: 90%;
        margin: 0.2rem 0;
      }

      .gallery {
        grid-template-columns: 1fr;
      }

      .gallery-item {
        height: 80px;
        font-size: 1.8rem;
      }

      .sender-selector {
        flex-direction: column;
      }

      .sender-btn {
        width: 100%;
      }
    }

    /* تحسينات للأجهزة اللوحية */
    @media (min-width: 769px) and (max-width: 1024px) {
      .container {
        max-width: 90%;
      }

      .gallery {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    /* تحسينات للأجهزة الكبيرة */
    @media (min-width: 1025px) {
      .container {
        max-width: 800px;
      }
    }

    /* تحسينات للأداء */
    .performance-optimize {
      will-change: transform, opacity;
      backface-visibility: hidden;
      transform: translateZ(0);
    }
  </style>
</head>
<body>
  <div class="intro-overlay" id="introOverlay">
    <div class="intro-text" id="introText">أهلاً منون 💖</div>
    <div class="loading-bar">
      <div class="loading-progress" id="loadingProgress"></div>
    </div>
  </div>

  <div class="heart-explosion" id="heartExplosion">
    <div class="big-heart">💖</div>
  </div>

  <div class="navigation">
    <div class="mode-toggle-container">
      <button class="toggle-night" id="nightMode">
        <span id="modeIcon">🌙</span>
        <span id="modeText">الوضع الليلي</span>
      </button>
    </div>
    <button class="nav-btn active" onclick="showPage('messagesPage')">رسائل الحب 💌</button>
    <button class="nav-btn" onclick="showPage('chatPage')">محادثتنا 💬</button>
    <button class="nav-btn" onclick="showPage('memoriesPage')">ذكرياتنا 🌟</button>
  </div>

  <!-- صفحة رسائل الحب -->
  <div class="container page active" id="messagesPage">
    <h1>💖 من عبدو إلى منة 💖</h1>
    <div class="message-container">
      <p id="loveMessage">تحميل الرسالة...</p>
    </div>
    <div class="love-timer" id="loveTimer"></div>
    <div class="footer">كل مرة تفتحي الصفحة... تلاقي رسالة جديدة من القلب 💘</div>
    
    <div class="btn-container">
      <button class="btn" onclick="showNewMessage()">رسالة جديدة 💌</button>
      <button class="btn" onclick="toggleMusic()" id="musicBtn">تشغيل الموسيقى 🎵</button>
      <button class="btn" onclick="showTypingMessage()">رسالة متحركة ✨</button>
    </div>
  </div>

  <!-- صفحة المحادثة -->
  <div class="container page messages-section" id="chatPage">
    <h2>💌 محادثتنا الحلوة 💌</h2>
    
    <div class="message-form">
      <textarea class="message-input" id="messageInput" placeholder="اكتب رسالتك هنا..."></textarea>
      
      <div class="sender-selector">
        <button class="sender-btn" id="senderAbdo" onclick="setSender('abdo')">عبدو 💙</button>
        <button class="sender-btn" id="senderMenna" onclick="setSender('menna')">منة 💝</button>
      </div>
      
      <button class="btn" onclick="sendMessage()">إرسال الرسالة 💖</button>
    </div>
    
    <div class="messages-list" id="messagesList">
      <!-- الرسائل ستظهر هنا -->
    </div>
  </div>

  <!-- صفحة الذكريات -->
  <div class="container page" id="memoriesPage">
    <h2>🌟 ذكرياتنا الجميلة 🌟</h2>
    
    <!-- عداد عيد الميلاد -->
    <div class="birthday-countdown">
      <h3>عيد ميلاد منة 🎂</h3>
      <div class="countdown-timer" id="birthdayCountdown"></div>
      <div class="birthday-message" id="birthdayMessage" style="display: none;"></div>
    </div>
    
    <div class="timeline">
      <div class="timeline-event">
        <h4>عيد ميلادك</h4>
        <p>31/10/2007</p>
      </div>
      <div class="timeline-event">
        <h4>أول كلمة حلوة منك 🌸</h4>
        <p>من يومها وقلبي مش بيرجع طبيعي، بقى في حضنك.</p>
      </div>
      <div class="timeline-event">
        <h4>أول مرة قولتلك بحبك 😍</h4>
        <p>كنت متوتر... بس الكون سكت عشان يسمعني.</p>
      </div>
      <div class="timeline-event">
        <h4>وعد 💍</h4>
        <p>نوعد بعض نبقى سوا... حتى لو الدنيا كلها ضدنا.</p>
      </div>
    </div>
    
    <!-- قسم رفع الوسائط -->
    <div class="media-upload">
      <h3>🖼️ أضف صور أو موسيقى لذكرياتنا 🎵</h3>
      <div class="upload-area" id="uploadArea">
        <div class="upload-icon">📁</div>
        <p>اسحب وأفلت الملفات هنا أو انقر للاختيار</p>
        <p class="small-text">يدعم الصور (JPG, PNG) والموسيقى (MP3, WAV)</p>
        <input type="file" id="fileInput" class="file-input" accept="image/*,audio/*" multiple>
      </div>
      <button class="btn" onclick="document.getElementById('fileInput').click()">اختر الملفات</button>
      
      <div class="uploaded-media" id="uploadedMedia">
        <!-- الوسائط المرفوعة ستظهر هنا -->
      </div>
    </div>
    
    <h3 style="margin-top: 2rem; text-align: center;">معرض حبنا 🖼️</h3>
    <div class="gallery">
      <div class="gallery-item">💖</div>
      <div class="gallery-item">🌹</div>
      <div class="gallery-item">🥰</div>
      <div class="gallery-item">💕</div>
      <div class="gallery-item">💘</div>
      <div class="gallery-item">💝</div>
    </div>
  </div>

  <div class="floating-elements" id="floatingElements"></div>
  <div class="love-particles" id="loveParticles"></div>
  <div class="lightning"></div>
  <div class="stars" id="stars"></div>

  <audio loop id="bgMusic" preload="auto">
    <source src="https://cdn.pixabay.com/audio/2023/03/26/audio_1445eb3f3d.mp3" type="audio/mpeg">
  </audio>

  <script>
    // جميع الرسائل موجودة هنا
    const messages = [
      "منة، وجودك في حياتي هو الأمان اللي عمري ما لقيته غير معاكي 💙",
      "أنا عبدو، وكل يوم معاك مدرسة حب جديدة بتعلّمني معنى الحياة ❤️",
      "لو كان قلبي مدينة، فأنتي العاصمة، وكل الطرق بتنتهي عندك 🏙️",
      "أنا مش بس وقعت في حبك، أنا غرقت فيه وعايز أعيش الغرق ده طول عمري 🌊",
      "كل لمسة منك بتحسسني إني لسه مولود من جديد 🥰",
      // ... (بقية الرسائل)
    ];

    const loveExpressions = [
      "بحبك 💕", "بعشقك 😍", "بموت فيك ❤️", "أنتِ حياتي 🌹", 
      "قلبي لك 💘", "أنتِ حبي 🥰", "غلاك في دمي 💓", 
      "ما أستغني عنك 💖", "أنتِ نصيبي 💗", "دلعك فريد 💝"
    ];

    const symbols = ["💖", "💘", "💝", "💓", "💗", "💕", "💞", "💟", "❣️", "🌸"];

    // عناصر DOM
    const elements = {
      loveMessage: document.getElementById("loveMessage"),
      floatingElements: document.getElementById("floatingElements"),
      introOverlay: document.getElementById("introOverlay"),
      introText: document.getElementById("introText"),
      loadingProgress: document.getElementById("loadingProgress"),
      nightModeBtn: document.getElementById("nightMode"),
      modeIcon: document.getElementById("modeIcon"),
      modeText: document.getElementById("modeText"),
      loveTimer: document.getElementById("loveTimer"),
      bgMusic: document.getElementById("bgMusic"),
      heartExplosion: document.getElementById("heartExplosion"),
      musicBtn: document.getElementById("musicBtn"),
      stars: document.getElementById("stars"),
      messageInput: document.getElementById("messageInput"),
      messagesList: document.getElementById("messagesList"),
      senderAbdo: document.getElementById("senderAbdo"),
      senderMenna: document.getElementById("senderMenna"),
      loveParticles: document.getElementById("loveParticles"),
      birthdayCountdown: document.getElementById("birthdayCountdown"),
      birthdayMessage: document.getElementById("birthdayMessage"),
      uploadArea: document.getElementById("uploadArea"),
      fileInput: document.getElementById("fileInput"),
      uploadedMedia: document.getElementById("uploadedMedia")
    };

    // حالات التطبيق
    const state = {
      isNightMode: false,
      isMusicPlaying: false,
      loveStartDate: new Date('2024-03-02'),
      currentSender: 'abdo',
      currentPage: 'messagesPage',
      birthdayInterval: null,
      birthdayCelebration: false
    };

    // تهيئة التطبيق
    function init() {
      simulateLoading();
      createStars();
      createParticles();
      setupEventListeners();
      setSender('abdo');
      loadMessages();
      animateTimeline();
      loadUploadedMedia();
      startBirthdayCountdown();
    }

    // انترو البداية
    function simulateLoading() {
      let progress = 0;
      const interval = setInterval(() => {
        progress += Math.random() * 10;
        elements.loadingProgress.style.width = `${Math.min(progress, 100)}%`;
        
        if (progress >= 100) {
          clearInterval(interval);
          setTimeout(() => {
            elements.introText.textContent = "بعشقك 😍";
            setTimeout(() => {
              elements.introOverlay.classList.add("hidden");
              showHeartExplosion();
              startApp();
            }, 1000);
          }, 300);
        }
      }, 200);
    }

    // بدء التطبيق
    function startApp() {
      showRandomMessage();
      updateLoveTimer();
      setInterval(updateLoveTimer, 1000);
      createFloatingElements();
    }

    // إعداد مستمعي الأحداث
    function setupEventListeners() {
      // تبديل الوضع الليلي
      elements.nightModeBtn.addEventListener('click', toggleNightMode);
      
      // تأثيرات اللمس
      document.addEventListener("click", handleClick);
      
      // تشغيل الموسيقى عند التفاعل الأول
      document.addEventListener('click', initAudio, { once: true });
      
      // مراقبة تغييرات الرسالة لعرض تأثير القلب
      const loveMessageObserver = new MutationObserver(() => {
        showHeartExplosion();
      });
      loveMessageObserver.observe(elements.loveMessage, { childList: true });
      
      // رفع الملفات
      elements.uploadArea.addEventListener('click', () => {
        elements.fileInput.click();
      });
      
      elements.fileInput.addEventListener('change', handleFileUpload);
      
      // سحب وإفلات الملفات
      elements.uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        elements.uploadArea.classList.add('dragover');
      });
      
      elements.uploadArea.addEventListener('dragleave', () => {
        elements.uploadArea.classList.remove('dragover');
      });
      
      elements.uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        elements.uploadArea.classList.remove('dragover');
        if (e.dataTransfer.files.length) {
          handleFiles(e.dataTransfer.files);
        }
      });
    }

    // تهيئة الصوت
    function initAudio() {
      elements.bgMusic.volume = 0.3;
      elements.bgMusic.play().catch(e => console.log("لم يتم تشغيل الصوت تلقائياً"));
    }

    // تبديل الوضع الليلي
    function toggleNightMode() {
      state.isNightMode = !state.isNightMode;
      document.body.classList.toggle('night-mode');
      
      if (state.isNightMode) {
        elements.modeIcon.textContent = "☀️";
        elements.modeText.textContent = "الوضع النهاري";
      } else {
        elements.modeIcon.textContent = "🌙";
        elements.modeText.textContent = "الوضع الليلي";
      }
      
      // تغيير الموسيقى حسب الوضع
      if (state.isNightMode) {
        elements.bgMusic.src = "https://cdn.pixabay.com/audio/2022/03/15/audio_0e5c1e9a2f.mp3";
      } else {
        elements.bgMusic.src = "https://cdn.pixabay.com/audio/2023/03/26/audio_1445eb3f3d.mp3";
      }
      
      if (state.isMusicPlaying) {
        elements.bgMusic.play().catch(e => console.log("تعذر تشغيل الموسيقى"));
      }
    }

    // تبديل تشغيل الموسيقى
    function toggleMusic() {
      state.isMusicPlaying = !state.isMusicPlaying;
      
      if (state.isMusicPlaying) {
        elements.bgMusic.play();
        elements.musicBtn.textContent = "إيقاف الموسيقى 🔇";
      } else {
        elements.bgMusic.pause();
        elements.musicBtn.textContent = "تشغيل الموسيقى 🎵";
      }
    }

    // تأثير انفجار القلب
    function showHeartExplosion() {
      elements.heartExplosion.classList.add("active");
      setTimeout(() => {
        elements.heartExplosion.classList.remove("active");
      }, 1200);
    }

    // إنشاء النجوم
    function createStars() {
      const fragment = document.createDocumentFragment();
      
      for (let i = 0; i < 100; i++) {
        const star = document.createElement("div");
        star.className = "star";
        star.style.top = `${Math.random() * 100}vh`;
        star.style.left = `${Math.random() * 100}vw`;
        star.style.animationDuration = `${Math.random() * 3 + 2}s`;
        fragment.appendChild(star);
      }
      
      elements.stars.appendChild(fragment);
    }

    // إنشاء جسيمات الحب
    function createParticles() {
      const fragment = document.createDocumentFragment();
      
      for (let i = 0; i < 50; i++) {
        const particle = document.createElement("div");
        particle.className = "particle";
        particle.style.left = `${Math.random() * 100}vw`;
        particle.style.animationDelay = `${Math.random() * 10}s`;
        particle.style.animationDuration = `${Math.random() * 10 + 10}s`;
        particle.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 70%)`;
        fragment.appendChild(particle);
      }
      
      elements.loveParticles.appendChild(fragment);
    }

    // إنشاء عناصر الطفو
    function createFloatingElements() {
      const fragment = document.createDocumentFragment();
      
      for (let i = 0; i < 30; i++) {
        setTimeout(() => {
          const element = createFloatingElement();
          fragment.appendChild(element);
          setTimeout(() => element.remove(), 15000);
        }, i * 300);
      }
      
      elements.floatingElements.appendChild(fragment);
      
      // استمرار إضافة عناصر جديدة
      setInterval(() => {
        const element = createFloatingElement();
        elements.floatingElements.appendChild(element);
        setTimeout(() => element.remove(), 15000);
      }, 800);
      
      // إضافة الشهاب بين الحين والآخر
      setInterval(createShootingStar, 8000);
    }

    // إنشاء عنصر طفو واحد
    function createFloatingElement() {
      const element = document.createElement("div");
      element.className = "floating-element performance-optimize";
      element.textContent = symbols[Math.floor(Math.random() * symbols.length)];
      element.style.left = `${Math.random() * 100}vw`;
      element.style.fontSize = `${Math.random() * 20 + 15}px`;
      element.style.animationDuration = `${Math.random() * 10 + 10}s`;
      element.style.animationDelay = `${Math.random() * 5}s`;
      return element;
    }

    // إنشاء شهاب
    function createShootingStar() {
      const star = document.createElement('div');
      star.className = 'shooting-star performance-optimize';
      document.body.appendChild(star);
      setTimeout(() => star.remove(), 2000);
    }

    // عرض رسالة عشوائية
    function showRandomMessage() {
      const message = messages[Math.floor(Math.random() * messages.length)];
      elements.loveMessage.textContent = message;
    }

    // زر عرض رسالة جديدة
    function showNewMessage() {
      showRandomMessage();
    }

    // عرض رسالة متحركة
    function showTypingMessage() {
      const message = messages[Math.floor(Math.random() * messages.length)];
      elements.loveMessage.textContent = "";
      elements.loveMessage.classList.remove("typing-animation");
      
      setTimeout(() => {
        elements.loveMessage.classList.add("typing-animation");
        let i = 0;
        const typingInterval = setInterval(() => {
          if (i < message.length) {
            elements.loveMessage.textContent += message.charAt(i);
            i++;
          } else {
            clearInterval(typingInterval);
            setTimeout(() => {
              elements.loveMessage.classList.remove("typing-animation");
            }, 1000);
          }
        }, 50);
      }, 100);
    }

    // تحديث عداد الحب
    function updateLoveTimer() {
      const now = new Date();
      const diff = now - state.loveStartDate;
      
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      
      elements.loveTimer.innerHTML = `
        ❤️ مدة حبنا: ${days} يوم ${hours} ساعة ${minutes} دقيقة ${seconds} ثانية ❤️
        <br>منذ 2 مارس 2024
      `;
    }

    // تأثيرات اللمس
    function handleClick(e) {
      const touchEffect = document.createElement("div");
      touchEffect.className = "touch-effect performance-optimize";
      touchEffect.textContent = loveExpressions[Math.floor(Math.random() * loveExpressions.length)];
      touchEffect.style.left = `${e.clientX}px`;
      touchEffect.style.top = `${e.clientY}px`;
      document.body.appendChild(touchEffect);
      
      setTimeout(() => {
        touchEffect.remove();
      }, 1500);
    }

    // عرض الصفحات
    function showPage(pageId) {
      // إخفاء جميع الصفحات
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      
      // إزالة النشاط من جميع أزرار التنقل
      document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // عرض الصفحة المطلوبة
      document.getElementById(pageId).classList.add('active');
      
      // تفعيل زر التنقل المناسب
      document.querySelector(`.nav-btn[onclick="showPage('${pageId}')"]`).classList.add('active');
      
      state.currentPage = pageId;
      
      // إذا كانت صفحة الذكريات، قم بتفعيل الخط الزمني
      if (pageId === 'memoriesPage') {
        animateTimeline();
      }
    }

    // تحريك الخط الزمني
    function animateTimeline() {
      const timelineEvents = document.querySelectorAll('.timeline-event');
      timelineEvents.forEach((event, index) => {
        setTimeout(() => {
          event.classList.add('animated');
        }, index * 300);
      });
    }

    // نظام الرسائل
    function setSender(sender) {
      state.currentSender = sender;
      
      // تحديث الأزرار
      if (sender === 'abdo') {
        elements.senderAbdo.classList.add('active');
        elements.senderMenna.classList.remove('active');
      } else {
        elements.senderMenna.classList.add('active');
        elements.senderAbdo.classList.remove('active');
      }
    }

    // عداد عيد الميلاد
    function startBirthdayCountdown() {
      updateBirthdayCountdown();
      state.birthdayInterval = setInterval(updateBirthdayCountdown, 1000);
    }

    function updateBirthdayCountdown() {
      const now = new Date();
      const currentYear = now.getFullYear();
      let birthday = new Date(currentYear, 9, 31); // 31 أكتوبر (الشهر يبدأ من 0)

      // إذا كان عيد الميلاد لهذا العام قد مر، ننتظر العام القادم
      if (now > birthday) {
        birthday = new Date(currentYear + 1, 9, 31);
      }

      const diff = birthday - now;
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);

      if (elements.birthdayCountdown) {
        elements.birthdayCountdown.innerHTML = `
          🎉 متبقي ${days} يوم ${hours} ساعة ${minutes} دقيقة ${seconds} ثانية 🎉
        `;
      }

      // إذا كان اليوم هو عيد الميلاد
      if (days === 0 && hours === 0 && minutes < 1) {
        if (!state.birthdayCelebration) {
          state.birthdayCelebration = true;
          celebrateBirthday();
        }
      } else {
        state.birthdayCelebration = false;
        if (elements.birthdayMessage) {
          elements.birthdayMessage.style.display = 'none';
        }
      }
    }

    function celebrateBirthday() {
      if (elements.birthdayMessage) {
        elements.birthdayMessage.style.display = 'block';
        elements.birthdayMessage.innerHTML = `
          <h4>كل سنة وانتي طيبة ي روح قلبي 🎂💖</h4>
          <p>وعقبال سنين كتيرة فرحانة ومبسوطة فيها وكل سنة واحنا مع بعض ومكملين مع بعض 💕</p>
        `;
      }
      
      // تفعيل انفجارات القلوب
      const celebrationInterval = setInterval(() => {
        showHeartExplosion();
        createFloatingElement();
      }, 500);
      
      setTimeout(() => {
        clearInterval(celebrationInterval);
      }, 10000);
    }

    // رفع الوسائط
    function handleFileUpload(e) {
      handleFiles(e.target.files);
    }

    function handleFiles(files) {
      for (let file of files) {
        if (file.type.startsWith('image/') || file.type.startsWith('audio/')) {
          uploadMedia(file);
        } else {
          alert('نوع الملف غير مدعوم. يرجى اختيار صورة أو ملف صوتي.');
        }
      }
    }

    function uploadMedia(file) {
      const reader = new FileReader();
      
      reader.onload = function(e) {
        const mediaData = {
          id: Date.now().toString(),
          name: file.name,
          type: file.type,
          data: e.target.result,
          timestamp: new Date().toISOString()
        };
        
        saveMediaToStorage(mediaData);
        displayMedia(mediaData);
      };
      
      reader.readAsDataURL(file);
    }

    function saveMediaToStorage(mediaData) {
      let mediaList = JSON.parse(localStorage.getItem('loveMedia')) || [];
      mediaList.push(mediaData);
      localStorage.setItem('loveMedia', JSON.stringify(mediaList));
    }

    function loadUploadedMedia() {
      const mediaList = JSON.parse(localStorage.getItem('loveMedia')) || [];
      mediaList.forEach(media => {
        displayMedia(media);
      });
    }

    function displayMedia(media) {
      const mediaItem = document.createElement('div');
      mediaItem.className = 'media-item';
      mediaItem.dataset.id = media.id;
      
      if (media.type.startsWith('image/')) {
        mediaItem.innerHTML = `
          <button class="delete-media" onclick="deleteMedia('${media.id}')">×</button>
          <img src="${media.data}" alt="${media.name}">
        `;
      } else if (media.type.startsWith('audio/')) {
        mediaItem.innerHTML = `
          <button class="delete-media" onclick="deleteMedia('${media.id}')">×</button>
          <audio controls>
            <source src="${media.data}" type="${media.type}">
            متصفحك لا يدعم تشغيل الصوتيات
          </audio>
        `;
      }
      
      elements.uploadedMedia.appendChild(mediaItem);
    }

    function deleteMedia(id) {
      let mediaList = JSON.parse(localStorage.getItem('loveMedia')) || [];
      mediaList = mediaList.filter(media => media.id !== id);
      localStorage.setItem('loveMedia', JSON.stringify(mediaList));
      
      const mediaElement = document.querySelector(`.media-item[data-id="${id}"]`);
      if (mediaElement) {
        mediaElement.remove();
      }
    }

    // بدء التطبيق
    window.addEventListener('DOMContentLoaded', init);
  </script>

<!-- Firebase Config -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import { getFirestore, collection, addDoc, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-analytics.js";

  // إعدادات Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyDz8zQWojljzEKQr6Dd33gPa7JpqAPruyM",
    authDomain: "love-5555.firebaseapp.com",
    projectId: "love-5555",
    storageBucket: "love-5555.firebasestorage.app",
    messagingSenderId: "65220863795",
    appId: "1:65220863795:web:41d642cd50117fe1e18046",
    measurementId: "G-J2ZQE1TWSM"
  };

  // تشغيل Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore(app);

  // إرسال رسالة
  async function sendMessage() {
    const messageText = elements.messageInput.value.trim();
    if (!messageText) return alert("من فضلك اكتب رسالة قبل الإرسال");

    try {
      await addDoc(collection(db, "messages"), {
        text: messageText,
        sender: state.currentSender,
        timestamp: new Date()
      });

      elements.messageInput.value = "";
      showHeartExplosion();
    } catch (err) {
      console.error("خطأ في الإرسال:", err);
      alert("حصل خطأ أثناء الإرسال");
    }
  }

  // تحميل الرسائل مباشرة من Firestore
  function loadMessages() {
    const q = query(collection(db, "messages"), orderBy("timestamp", "desc"));
    onSnapshot(q, (snapshot) => {
      elements.messagesList.innerHTML = "";
      snapshot.forEach((doc) => {
        displayMessage(doc.data());
      });
    });
  }

  function displayMessage(message) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `message-item ${message.sender === 'abdo' ? 'message-from-abdo' : 'message-from-menna'}`;
    
    const senderName = message.sender === 'abdo' ? 'عبدو 💙' : 'منة 💝';
    
    let timestampText = "الآن";
    if (message.timestamp) {
      try {
        const date = message.timestamp.toDate();
        timestampText = date.toLocaleString('ar-EG');
      } catch (e) {
        console.log("timestamp مش تاريخ:", message.timestamp);
      }
    }

    messageDiv.innerHTML = `
      <div class="message-header">
        <span class="message-sender">${senderName}</span>
        <span class="message-time">${timestampText}</span>
      </div>
      <div class="message-content">${message.text}</div>
    `;
    
    elements.messagesList.prepend(messageDiv);
  }

  // استبدل الدوال القديمة بنفس الأسماء
  window.sendMessage = sendMessage;
  window.loadMessages = loadMessages;
</script>

</body>
</html>